(function(e){var d;var f={overlay:true};e.fn.myPlugin=function(h){d=e.extend(f,h);var i=this.is("form")?"submit":"click";e("body").on(i,this.selector,function(m){m.preventDefault();var l=e(this);c();if(l.is("a")){var j=l.attr("href");if(j=="#"){var k=e("#"+l.attr("rel")).clone().show();a(k)}else{g(j,{})}}else{if(l.is("form")){g(l.attr("action"),l.serialize(),l.attr("method"))}}return false})};var g=function(h,i,j){jQuery.ajax({type:(typeof j=="undefined")?"GET":j,url:h,data:i,dataType:"html",success:a})};var a=function(k){e("#sdcontainer").removeClass("sd_loading");e("#content, #sdtitle").remove();e("<div/>").attr("id","content").addClass("content").html(k).appendTo("#sdcontainer");var i=e("#sdcontainer").width();var j=e("#sdcontainer").height();var l=b(i,j);e("<div/>").addClass("cbutton").appendTo("#sdcontainer");e("#sdcontainer").css({width:60,height:60}).animate({width:i+"px",height:j+"px",left:l[0]+"px",top:l[1]+"px"},200);e(".cbutton").click(function(){e("#sdoverlay, .sdcontainer").remove()})};var c=function(){var h=e(document).height();var i=b(60,60);e("#sdoverlay, #sdcontainer").remove();if(d.overlay){e("<div/>").attr("id","sdoverlay").addClass("sdoverlay").css("height",h).appendTo(document.body)}e("<div/>").attr("id","sdcontainer").addClass("sdcontainer sd_loading").css({left:i[0]+"px",top:i[1]+"px"}).appendTo(document.body);e("#sdoverlay").click(function(){e("#sdoverlay, .sdcontainer").remove()})};var b=function(i,k){var m=e(document).height();var l=e(window).height();var j=e(window).width();return[j/2-i/2,l/2-k/2]}})(jQuery);
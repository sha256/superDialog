(function(g){var s;var i={overlay:true,method:"GET",minimize:false,minimizeleft:100,minimizebottom:20};var o="";var q,a,n;var r="jsdoverlay",c="jsdcontent",k="jsdcontainer",f="jsdloading",h="jsdcbutton",b=".jsdoverlay",m=".jsdcontainer";g.fn.superDialog=function(t){s=g.extend(i,t);var u=this.is("form")?"submit":"click";q=g(document).height();a=g(window).height();n=g(window).width();g("body").on(u,this.selector,function(z){z.preventDefault();var y=g(this);var w=Math.floor(Math.random()*10000);o="jsdxcontainer"+w;e();if(y.is("a")){var v=y.attr("href");if(v=="#"){var x=g(y.attr("rel")).clone().show();l(x)}else{p(v,s.method)}}else{if(y.is("form")){p(y.attr("action"),y.attr("method"),y.serialize())}}})};var p=function(t,v,u){jQuery.ajax({type:(typeof v=="undefined")?"GET":v,url:t,data:u,dataType:"html",success:l})};var l=function(v){g(m).removeClass(f);g("<div/>").addClass(c).html(v).appendTo("."+o);var t=g("."+o).width();var u=g("."+o).height();var x=j(t,u);g("<div/>").addClass(h).appendTo(m);if(s.minimize==true){g("<div/>").addClass("jsdmbutton").appendTo(m)}g("."+o).css({width:60,height:60}).animate({width:t+"px",height:u+"px",left:x[0]+"px",top:x[1]+"px"},100);g("."+h).click(function(){g(b).remove();g(this).parent().remove()});if(s.minimize==false){return}g(".jsdmbutton").click(function(){var y=g(this).parent().attr("role");var w=a-s.minimizebottom;var z=d(w);if(z==-1){alert("Sorry! Overflow!")}else{g("<div/>").addClass("jsdminimized").attr("role",y).css({left:x[0]+"px",top:x[1]+"px"}).show().appendTo(document.body).animate({left:z+"px",top:w+"px"},200);g(this).parent().hide()}});g("body").on("click",".jsdminimized",function(){var w=g(this).attr("role");g("."+w).show();g(this).remove()})};var e=function(){var t=j(60,60);if(s.minimize==false){g(b+", ."+k).remove()}if(s.overlay==true&&s.minimize==false){g("<div/>").addClass(r).css("height",q).appendTo(document.body)}g("<div/>").addClass(k+" "+f+" "+o).attr("role",o).css({left:t[0]+"px",top:t[1]+"px"}).appendTo(document.body);if(!s.minimize){g(b).click(function(){g(b+", "+m).remove()})}};var j=function(t,u){return[n/2-t/2,a/2-u/2]};var d=function(w){var u=s.minimizeleft,x,t;var v=n-70;for(;u<v;u+=70){x=document.elementFromPoint(u,w);t=x.className.replace(/\s/,".");if(!(t.length>1)){return u}}return -1}})(jQuery);